<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <!-- CSS only -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />

    <!-- JS, Popper.js, and jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
      integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <!-- 0. create Header -->
    <div>
      <header>Weather Deshboard</header>
    </div>
    
<!-- search button -->
    <div class="container">
        <div class="search">
            <div class="input-group mb">
                <input type="text" class="form-control" placeholder="search city"/>
                <button class="btn btn-outline-secondary" type="button" id="button-addon2">
                    search city
                </button>
            </div>
    <!-- search history -->
        <div class="list-group list-group-flush" id="history">
         
        </div>
    </div>
    </div>
    </div>
     <!-- current card -->
     <div class="current card">

     </div>
     <!-- future card -->
      <div class="future">
      
      </div>
           
             
  
    <script src="moment.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script type="text/javascript">

      
      // 1. GIVEN a weather dashboard with form inputs
      // WHEN I search for a city
      // create search bar
      // use api to get countries
      // when chooes cities add automaticaly search history



  // var queryUrlft = "http://api.openweathermap.org/data/2.5/forecast?q=" + cityName + "&appid=" + AppiKey
  var date = moment().format("MMM Do YY");
  var Arr=[]


          $("#button-addon2").on("click", function(){
            cityName= $(".form-control").val().toUpperCase()
            if (jQuery.inArray(cityName,Arr)===-1){
              console.log(cityName)
// if (cityName){
// //weathercity)

              var list = $("<a href=# class=list-group-item list-group-item-action" + " " + "id=" + cityName + ">" + cityName + "</a>")
              $("#history").append(list)
              Arr.push(cityName.toUpperCase())
              } else {
                var ErrorTag=("<label type=text placeholder=city does not exist!!!></>")
                 $(".container").append(ErrorTag)
              // }
            }
          

      // 2. THEN I am presented with current and future conditions for that city and that city is added to the search history
      // WHEN I view current weather conditions for that city
      // THEN I am presented with the city name, the date, an icon representation of weather conditions, the temperature, the humidity, the wind speed, and the UV index

         
            var AppiKey = "f3918971cddc275fa0fe8911467b5ac7"
            var queryUrlcr = "https://api.openweathermap.org/data/2.5/weather?q=" + cityName + "&appid=" + AppiKey
            console.log(queryUrlcr,cityName)
             $.ajax({
              url: queryUrlcr,
              method: "GET"
            }).then(function (response) {
              // get value from weather API=====
              var temp = Math.round((response.main.temp - 273.15) * 1.8 + 32);
              var humidity = response.main.humidity;
              var windSpeed = response.wind.speed;
              var Icon = response.weather[0].icon // ====== var UVindex = response.wind.speed;
              // create tags and set values ====
              $(".current").empty()
              var cityTag = ("<h3>" + cityName + " " + "(" + date + ")" + " " +
                "<img src=https://openweathermap.org/img/wn/" + response.weather[0].icon +
                ".png>"
                + "</h3>");
              var Ttemp = ("<h5>" + "Temperature: " + temp + " °F" + "</h5>")
              var Thumidity = ("<h5>" + "humidity: " + humidity + " %" + "</h5>")
              var TwindSpeed = ("<h5>" + "windSpeed: " + windSpeed + " MPH" + "</h5>")
              var TUVIndex = ("<h5>" + "UV Index: " + "" + "</h5>")

              // display values in current tag
              $(".current").append(cityTag)
              $(".current").append(Ttemp)
              $(".current").append(Thumidity)
              $(".current").append(TwindSpeed)
              $(".current").append(TUVIndex)

            })
            
            console.log($(".list - group - item").text())

$(".list-group-item").on("click", function(){
 cityName= $(this).attr("id")

  var queryUrlcr = "https://api.openweathermap.org/data/2.5/weather?q=" + cityName + "&appid=" + AppiKey

  $.ajax({
    url: queryUrlcr,
    method: "GET"
  }).then(function (response) {
    // get value from weather API=====
    var temp = Math.round((response.main.temp - 273.15) * 1.8 + 32);
    var humidity = response.main.humidity;
    var windSpeed = response.wind.speed;
    var Icon = response.weather[0].icon // ====== var UVindex = response.wind.speed;
    // create tags and set values ====
    $(".current").empty()
    var cityTag = ("<h3>" + cityName + " " + "(" + date + ")" + " " +
      "<img src=https://openweathermap.org/img/wn/" + response.weather[0].icon +
      ".png>"
      + "</h3>");
    var Ttemp = ("<h5>" + "Temperature: " + temp + " °F" + "</h5>")
    var Thumidity = ("<h5>" + "humidity: " + humidity + " %" + "</h5>")
    var TwindSpeed = ("<h5>" + "windSpeed: " + windSpeed + " MPH" + "</h5>")
    var TUVIndex = ("<h5>" + "UV Index: " + "" + "</h5>")

    // display values in current tag
    $(".current").append(cityTag)
    $(".current").append(Ttemp)
    $(".current").append(Thumidity)
    $(".current").append(TwindSpeed)
    $(".current").append(TUVIndex)

})

})
    })
        
     
      // WHEN I view the UV index
      // THEN I am presented with a color that indicates whether the conditions are favorable, moderate, or severe

      
      
      // 3. WHEN I view future weather conditions for that city
      //  THEN I am presented with a 5 - day forecast that displays the date, an icon representation of weather conditions, the temperature, and the humidity

      //  $.ajax({
      //     url: queryUrlcr,
      //     method: "GET"
      //   }).then(function (response) {
          
      //   });
      // 4. WHEN I click on a city in the search history
      //    THEN I am again presented with current and future conditions for that city

      // 5. WHEN I open the weather dashboard
      // THEN I am presented with the last searched city forecast
    </script>

   
 
  </body>
</html>
